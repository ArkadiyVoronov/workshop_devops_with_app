# Описание воркшопа

## Цели обучения

По итогам воркшопа участники освоят ключевые компетенции в области отказоустойчивости финтех-систем:

| Компетенция | Результат |
|-------------|-----------|
| **Observability** | Настройка полноценного мониторинга приложений с метриками, логами и трейсами |
| **Проактивное обнаружение** | Выявление аномалий и деградации системы до влияния на конечных пользователей |
| **Паттерны отказоустойчивости** | Применение Circuit Breaker, Bulkhead, Retry, Timeout, Fallback в реальных сценариях |
| **Chaos Engineering** | Проведение контролируемых экспериментов для повышения надёжности системы |

---

## Целевая аудитория

- **QA Engineers** — тестирование производительности и отказоустойчивости
- **DevOps Engineers** — построение надёжной инфраструктуры
- **SRE специалисты** — управление надёжностью и SLO
- **Backend-разработчики** — проектирование отказоустойчивых сервисов

---

## Предварительные требования

### Обязательные
- Базовые знания Linux (CLI, процессы, сети)
- Понимание принципов работы Docker и контейнеризации
- Знакомство с HTTP/REST и форматом JSON

### Желательные
- Опыт работы с SQL и реляционными БД
- Понимание микросервисной архитектуры
- Базовые знания Prometheus/Grafana

---

## Длительность

| Формат | Время | Описание |
|--------|-------|----------|
| **Полный воркшоп** | 4 часа | Все кейсы с теоретическим введением |
| **Отдельный кейс** | 30–45 минут | Глубокое погружение в одну проблему |
| **Экспресс-формат** | 2 часа | Только практика без теории |

---

## Сценарий

> **Вы — команда платёжной платформы "FinCore"**

Перед предстоящей "Чёрной пятницей" необходимо провести комплексную проверку готовности системы:

- **Пиковые нагрузки** — выдержит ли платформа всплеск транзакций?
- **Отказоустойчивость** — как поведут себя критические компоненты при сбоях?
- **Время восстановления** — сколько займёт восстановление после инцидента?
- **Каскадные сбои** — не приведёт ли падение одного сервиса к коллапсу всей системы?

Ваша задача — выявить узкие места, протестировать сценарии отказов и подготовить runbook для оперативного реагирования.

---

## Используемые инструменты

| Категория | Инструмент | Назначение |
|-----------|------------|------------|
| **Приложение** | Flask + PostgreSQL | Тестовая финтех-платформа |
| **Контейнеризация** | Docker Compose | Изоляция сервисов и воспроизводимое окружение |
| **Метрики** | Prometheus | Сбор и хранение временных рядов |
| **Визуализация** | Grafana | Дашборды и алертинг |
| **Инъекция отказов** | Встроенный API / Chaos Toolkit | Контролируемое внесение сбоев |

---

## Методология: Chaos Engineering Cycle

## Стандартизированный цикл кейса

```mermaid
flowchart LR
    subgraph Цикл[" "]
        direction LR
        
        A[1. BASELINE<br/>(Измерение)] --> B[2. INJECT<br/>(Внесение)]
        B --> C[3. DETECT<br/>(Обнаружение)]
        C --> D[4. RESPOND<br/>(Реакция)]
        D --> E[5. RECOVER<br/>(Уроки)]
        E --> A
    end
    
    style A fill:#e1f5fe,stroke:#01579b,stroke-width:2px,color:#000
    style B fill:#fff3e0,stroke:#e65100,stroke-width:2px,color:#000
    style C fill:#f3e5f5,stroke:#4a148c,stroke-width:2px,color:#000
    style D fill:#e8f5e9,stroke:#1b5e20,stroke-width:2px,color:#000
    style E fill:#fce4ec,stroke:#880e4f,stroke-width:2px,color:#000

### Этапы цикла

| Этап | Действия | Ключевые вопросы |
|------|----------|------------------|
| **Baseline** | Фиксация нормальных показателей системы | Какие метрики считать нормой? |
| **Inject** | Контролируемое внесение отказа | Какой сценарий тестируем? |
| **Detect** | Наблюдение за поведением системы | Как быстро обнаружили проблему? |
| **Respond** | Реакция на инцидент | Сработали ли алерты? Что делаем? |
| **Recover** | Восстановление и анализ | Какие уроки извлекли? |

---

## Структура кейсов

| # | Кейс | Тип отказа | Ключевые метрики |
|---|------|------------|------------------|
| 1 | Деградация latency | Высокая нагрузка | p50, p95, p99, RPS |
| 2 | Исчерпание пула соединений | Утечка ресурсов | active_connections, waiting_queries |
| 3 | Случайные ошибки | Нестабильность | error_rate, success_rate |
| 4 | Утечка памяти | OOM | memory_usage, container_restarts |
| 5 | Каскадный отказ | Зависимости | upstream_health, circuit_breaker_state |

---

## Что вы получите

- Готовое окружение для chaos engineering
- Набор Grafana-дашбордов для мониторинга
- Runbook с процедурами реагирования
- Понимание паттернов отказоустойчивости на практике
